# Lab4 Report

**University:** ITMO University

**Faculty:** FICT

**Course:** Cloud platforms as the basis of technology entrepreneurship

**Year:** 2025/2026

**Group:** U4225

**Author:** Tantsiura Valentin Olegovich

**Lab:** Lab4

**Date of create:** 02.12.2025

**Date of finished:** 02.12.2025

## Цель работы

Разработка архитектуры, схемы инфраструктуры и расчет экономической модели для AI-приложения "SellText AI" (сервис генерации описаний товаров по фото).

## 1. Схемы инфраструктуры

### 1.1. Начальное состояние (MVP)

**Архитектура:** Монолит.

Используется минимальный набор сервисов для проверки гипотезы. Фронтенд и бэкенд находятся в одном контейнере Cloud Run. База данных — Firestore (NoSQL) для быстрого старта без жесткой схемы. Прямое подключение к Vertex AI.

[ВСТАВИТЬ СКРИНШОТ СХЕМЫ MVP]

### 1.2. Тестирование партнерами (Beta)

**Архитектура:** Микросервисы.

Произошло разделение на Frontend и Backend сервисы. Добавлен Load Balancer для распределения входящего трафика. Подключен Cloud Storage для хранения загружаемых изображений. Внедрен CI/CD пайплайн через Cloud Build для автоматического обновления контейнеров.

[ВСТАВИТЬ СКРИНШОТ СХЕМЫ BETA]

### 1.3. Продуктовое решение (Production)

**Архитектура:** High Load & High Availability.

Добавлен слой безопасности (Cloud Armor) и ускорения контента (Cloud CDN). Внедрено кэширование (Memorystore Redis) для снижения расходов на AI-запросы. База данных мигрирована на Cloud SQL (PostgreSQL) с репликацией для надежности. Настроен автоскейлинг инстансов.

[ВСТАВИТЬ СКРИНШОТ СХЕМЫ PRODUCTION]

## 2. Экономическая модель (Monthly Cost Estimate)

Расчет примерной стоимости содержания инфраструктуры в зависимости от этапа развития проекта (цены на основе Google Cloud Pricing Calculator).

| Категория ресурсов | MVP (Dev) | Beta (Test) | Production (High Load) |
|-------------------|-----------|-------------|------------------------|
| Compute (Cloud Run) | $0 (Free Tier) | ~$20 | ~$150 |
| Database (Firestore -> SQL) | $0 (Free Tier) | ~$10 | ~$100 (Cloud SQL HA) |
| Storage (Images) | $0.50 | ~$5 | ~$50 |
| AI API (Vertex AI) | $5 | ~$50 | ~$500+ |
| Networking & Security | $0 | ~$18 (LB) | ~$50 (Global LB + Armor) |
| Caching (Redis) | $0 | $0 | ~$40 |
| **ИТОГО в месяц** | **~$5.50** | **~$103** | **~$890+** |

## 3. Обоснование выбора ресурсов

### Cloud Run (Compute):

Выбран как основная платформа из-за модели оплаты Pay-as-you-go. В отличие от аренды виртуальных машин (VM), Cloud Run не тарифицирует время простоя, что критически выгодно на этапах MVP и Beta. Поддерживает мгновенное масштабирование от 0 до 1000+ инстансов.

### Миграция Firestore → Cloud SQL:

Firestore идеален для MVP благодаря бесплатным лимитам и простоте интеграции.

Переход на Cloud SQL (PostgreSQL) в Production обусловлен необходимостью сложной аналитики, транзакционной целостности данных (ACID) и работы со связной структурой данных (пользователи/платежи/история), с которой NoSQL справляется хуже.

### Внедрение Cloud Memorystore (Redis):

Использование кэша в продакшене экономически обосновано. Стоимость генерации одного описания через AI API высока. Redis позволяет сохранять результаты популярных запросов и отдавать их мгновенно и бесплатно, снижая нагрузку на Vertex AI и общую стоимость владения системой.

### Безопасность (Cloud Armor):

На этапе Production критична защита от DDoS-атак и ботов, которые могут "скликать" бюджет, отправляя тысячи паразитных запросов к платному AI API. Cloud Armor фильтрует такой трафик на входе.

